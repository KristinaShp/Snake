<canvas id="pb" width="500" height="500"></canvas>
<h1> Score: <span id='score'> </span> </h1> 
<p>Created by Kris Shpakovych</p>
<script>
    // sating up variables for rendering 
    const scoreView = document.getElementById("score");
    const pinkCanv = document.getElementById("pb");
    const pinkCtx = pinkCanv.getContext("2d");
    // control player`s key pushes
    document.addEventListener("keydown", keyPush);
    // starting the game and control speed in milliseconds 
    let gameRun = setInterval(game, 500);
    let gameOnPause = false
    let score = 0

    // sating up the size of game tile
    const tileSize = 25;
    // game borders
    const gameBorders = {
        x:pinkCanv.width / tileSize - 1,
        y:pinkCanv.height / tileSize - 1,
    };
    const snakeTail = []
    let apple = {
        x: generateRandomNumber(pinkCanv.width / tileSize),
        y: generateRandomNumber(pinkCanv.height / tileSize),
    }
    let snakeX = generateRandomNumber(pinkCanv.width / tileSize);
    let snakeY = generateRandomNumber(pinkCanv.height / tileSize);


    // controlling the direction of snake movement 
    let velosity = {
        x: 0,
        y: 0,
    };
    function generateRandomNumber(max) {
        return Math.floor(Math.random() * max);
    }

    function game() {
        // control apple eating 
        if (snakeX === apple.x && snakeY === apple.y) {
            snakeTail.unshift([apple.x, apple.y]);

            apple.x = generateRandomNumber(pinkCanv.width / tileSize);
            apple.y = generateRandomNumber(pinkCanv.height / tileSize);
            score++;
            scoreView.innerText = score;
        }


        // control snake always inside game field 
        if (snakeX < 0) {
            snakeX = gameBorders.x;
        }
        if (snakeX > gameBorders.x) {
            snakeX = 0;
        }
        if (snakeY < 0) {
            snakeY = gameBorders.y;
        }
        if (snakeY > gameBorders.y) {
            snakeY = 0;
        }
        // rendering image
        pinkCtx.fillStyle = "pink";
        pinkCtx.fillRect(0, 0, pinkCanv.width, pinkCanv.height);
        pinkCtx.fillStyle = "red";
        pinkCtx.fillRect(apple.x * tileSize, apple.y * tileSize, tileSize, tileSize);
        pinkCtx.fillStyle = "darkgreen";
        pinkCtx.fillRect(snakeX * tileSize, snakeY * tileSize, tileSize, tileSize);
        // cycle to draw every segment of snake tail
        for (let i = 0; i < snakeTail.length; i++) {
            pinkCtx.fillStyle = "green";
            pinkCtx.fillRect(snakeTail[i][0] * tileSize, snakeTail[i][1] * tileSize, tileSize, tileSize);

        }
        // changing tail coordinates
        snakeTail.push([snakeX, snakeY]);
        snakeTail.shift()
        // change head coordinates 
        snakeX = snakeX + velosity.x;
        snakeY = snakeY + velosity.y;

    }

    // control player input  
    function keyPush(evt) {
        switch (evt.keyCode) {
            case 37:
                velosity.x = -1; velosity.y = 0;
                break;
            case 38:
                velosity.x = 0; velosity.y = -1;
                break;
            case 39:
                velosity.x = 1; velosity.y = 0;
                break;
            case 40:
                velosity.x = 0; velosity.y = 1;
                break;
            case 27:
                clearInterval(gameRun);
                gameOnPause = true;
                break;
            case 13:
                if (gameOnPause) {
                    gameRun = setInterval(game, 500);
                    gameOnPause = false;
                }
                break;
        }
    }
</script>